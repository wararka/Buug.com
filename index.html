<!DOCTYPE html>
<html lang="so">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>üî• Modern Drag Editor ‚Äì Mobile Friendly</title>

<style>
    :root {
        --bg: #0f0f0f;
        --toolbar: rgba(30,30,30,0.95);
        --text: white;
        --block-bg: rgba(255,255,255,0.05);
        --border: #333;
    }

    body.light {
        --bg: #f5f5f5;
        --toolbar: rgba(255,255,255,0.95);
        --text: #111;
        --block-bg: rgba(0,0,0,0.05);
        --border: #ccc;
    }

    body {
        margin: 0;
        background: var(--bg);
        font-family: "Segoe UI", sans-serif;
        color: var(--text);
        overflow-x: hidden;
        transition: 0.3s;
    }

    /* Toolbar */
    #toolbar {
        background: var(--toolbar);
        backdrop-filter: blur(10px);
        padding: 10px;
        display: flex;
        gap: 8px;
        overflow-x: auto;
        white-space: nowrap;
        border-bottom: 1px solid var(--border);
    }

    #toolbar::-webkit-scrollbar {
        height: 6px;
    }
    #toolbar::-webkit-scrollbar-thumb {
        background: #444;
        border-radius: 10px;
    }

    button {
        background: #1f1f1f;
        color: white;
        border: none;
        padding: 10px 14px;
        border-radius: 6px;
        cursor: pointer;
        font-size: 14px;
        flex-shrink: 0;
        transition: 0.2s;
    }

    body.light button {
        background: #e0e0e0;
        color: #111;
    }

    button:hover {
        background: #333;
        color: cyan;
    }

    /* Editor */
    #editor {
        min-height: 100vh;
        padding: 20px;
        position: relative;
    }

    .block {
        position: absolute;
        padding: 10px;
        cursor: grab;
        border-radius: 8px;
        max-width: 90vw;
        transition: transform 0.1s;
    }

    .block:active {
        cursor: grabbing;
        transform: scale(1.03);
    }

    img, video {
        max-width: 85vw;
        border-radius: 10px;
    }

    .text-block {
        background: var(--block-bg);
        padding: 12px;
        border-left: 3px solid cyan;
        min-width: 150px;
        max-width: 85vw;
        color: var(--text);
        font-size: 16px;
    }

    /* Modals */
    #helpModal, #shareModal {
        position: fixed;
        top: 0; left: 0;
        width: 100%; height: 100%;
        background: rgba(0,0,0,0.7);
        display: none;
        justify-content: center;
        align-items: center;
        z-index: 2000;
        padding: 20px;
    }

    .modal-box {
        background: #1f1f1f;
        padding: 20px;
        width: 90%;
        max-width: 350px;
        border-radius: 10px;
        text-align: center;
        color: white;
        border: 1px solid #444;
    }

    .share-btn {
        width: 100%;
        margin: 5px 0;
        padding: 10px;
        border-radius: 6px;
        background: #2a2a2a;
        color: white;
        border: none;
        cursor: pointer;
    }

    .share-btn:hover {
        background: #444;
        color: cyan;
    }
</style>
</head>
<body>

<!-- Toolbar -->
<div id="toolbar">
    <button onclick="addText()">‚úè Qoraal</button>
    <button onclick="addImage()">üñº Sawir</button>
    <button onclick="addVideo()">üé¨ Video</button>

    <button onclick="leftAll()">‚¨Ö Bidix</button>
    <button onclick="centerAll()">‚¨Ü‚¨á Dhexda</button>
    <button onclick="rightAll()">‚û° Midig</button>

    <button onclick="toggleMode()">üåó Mode</button>
    <button onclick="openShare()">üì§ Share</button>
    <button onclick="openHelp()">‚ùî Help</button>
</div>

<!-- Editor -->
<div id="editor"></div>

<!-- HELP MODAL -->
<div id="helpModal">
    <div class="modal-box">
        <h2>üìò Sida loo isticmaalo</h2>
        <p>‚Ä¢ Jiid blocks si aad u dhaqaajiso.</p>
        <p>‚Ä¢ ‚ÄúBidix / Dhexda / Midig‚Äù waxay u dhigaan dhammaan blocks.</p>
        <p>‚Ä¢ ‚ÄúShare‚Äù waxay kuu ogolaanaysaa inaad wadaagto.</p>
        <button onclick="closeHelp()">OK</button>
    </div>
</div>

<!-- SHARE MODAL -->
<div id="shareModal">
    <div class="modal-box">
        <h2>üì§ Share</h2>

        <button class="share-btn" onclick="shareWhatsApp()">WhatsApp</button>
        <button class="share-btn" onclick="shareFacebook()">Facebook</button>
        <button class="share-btn" onclick="shareTwitter()">X (Twitter)</button>
        <button class="share-btn" onclick="shareTelegram()">Telegram</button>
        <button class="share-btn" onclick="shareEmail()">Email</button>
        <button class="share-btn" onclick="shareGoogleKeep()">Google Keep</button>
        <button class="share-btn" onclick="shareGoogleDocs()">Google Docs</button>
        <button class="share-btn" onclick="downloadText()">Notepad (.txt)</button>

        <button onclick="closeShare()">Close</button>
    </div>
</div>

<script>
let editor = document.getElementById("editor");

/* DARK / LIGHT MODE */
function toggleMode() {
    document.body.classList.toggle("light");
}

/* HELP MODAL */
function openHelp() { document.getElementById("helpModal").style.display = "flex"; }
function closeHelp() { document.getElementById("helpModal").style.display = "none"; }

/* SHARE MODAL */
function openShare() { document.getElementById("shareModal").style.display = "flex"; }
function closeShare() { document.getElementById("shareModal").style.display = "none"; }

/* DRAG SYSTEM (mobile + mouse) */
function makeDraggable(el) {
    let offsetX, offsetY;

    function startDrag(e) {
        let p = e.touches ? e.touches[0] : e;
        offsetX = p.clientX - el.offsetLeft;
        offsetY = p.clientY - el.offsetTop;

        document.addEventListener("mousemove", drag);
        document.addEventListener("touchmove", drag);
        document.addEventListener("mouseup", stopDrag);
        document.addEventListener("touchend", stopDrag);
    }

    function drag(e) {
        let p = e.touches ? e.touches[0] : e;
        let x = p.clientX - offsetX;
        let y = p.clientY - offsetY;

        el.style.left = Math.max(10, Math.min(x, window.innerWidth - el.offsetWidth - 10)) + "px";
        el.style.top = Math.max(10, y) + "px";
    }

    function stopDrag() {
        document.removeEventListener("mousemove", drag);
        document.removeEventListener("touchmove", drag);
    }

    el.addEventListener("mousedown", startDrag);
    el.addEventListener("touchstart", startDrag);
}

/* ALIGN ALL LEFT */
function leftAll() {
    document.querySelectorAll(".block").forEach(b => b.style.left = "10px");
}

/* ALIGN ALL CENTER */
function centerAll() {
    let screen = window.innerWidth;
    document.querySelectorAll(".block").forEach(b => {
        b.style.left = (screen / 2 - b.offsetWidth / 2) + "px";
    });
}

/* ALIGN ALL RIGHT */
function rightAll() {
    let screen = window.innerWidth;
    document.querySelectorAll(".block").forEach(b => {
        b.style.left = (screen - b.offsetWidth - 10) + "px";
    });
}

/* ADD TEXT */
function addText() {
    let div = document.createElement("div");
    div.className = "block text-block";
    div.contentEditable = true;
    div.innerText = "Qoraal cusub...";
    div.style.left = "20px";
    div.style.top = "20px";

    editor.appendChild(div);
    makeDraggable(div);
}

/* ADD IMAGE */
function addImage() {
    let input = document.createElement("input");
    input.type = "file";
    input.accept = "image/*";

    input.onchange = () => {
        let file = input.files[0];
        let reader = new FileReader();

        reader.onload = () => {
            let img = document.createElement("img");
            img.src = reader.result;

            let block = document.createElement("div");
            block.className = "block";
            block.style.left = "20px";
            block.style.top = "20px";
            block.appendChild(img);

            editor.appendChild(block);
            makeDraggable(block);
        };

        reader.readAsDataURL(file);
    };

    input.click();
}

/* ADD VIDEO */
function addVideo() {
    let input = document.createElement("input");
    input.type = "file";
    input.accept = "video/*";

    input.onchange = () => {
        let file = input.files[0];
        let url = URL.createObjectURL(file);

        let video = document.createElement("video");
        video.src = url;
        video.controls = true;

        let block = document.createElement("div");
        block.className = "block";
        block.style.left = "20px";
        block.style.top = "20px";
        block.appendChild(video);

        editor.appendChild(block);
        makeDraggable(block);
    };

    input.click();
}

/* SHARE FUNCTIONS */
function getContent() {
    return encodeURIComponent(editor.innerText);
}

function shareWhatsApp() { window.open("https://wa.me/?text=" + getContent()); }
function shareFacebook() { window.open("https://www.facebook.com/sharer/sharer.php?quote=" + getContent()); }
function shareTwitter() { window.open("https://twitter.com/intent/tweet?text=" + getContent()); }
function shareTelegram() { window.open("https://t.me/share/url?text=" + getContent()); }
function shareEmail() { window.open("mailto:?body=" + getContent()); }
function shareGoogleKeep() { window.open("https://keep.google.com/#home"); }
function shareGoogleDocs() { window.open("https://docs.google.com/document/u/0/"); }

function downloadText() {
    let blob = new Blob([editor.innerText], { type: "text/plain" });
    let link = document.createElement("a");
    link.href = URL.createObjectURL(blob);
    link.download = "note.txt";
    link.click();
}
</script>

</body>
</html>
